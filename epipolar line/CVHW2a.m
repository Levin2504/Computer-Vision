%import image 1.png and 2.png as x1 x2 before running the code

P1=[2256,1015,1]';
P2=[1980,1379,1]';
P3=[2750,2427,1]';
P4=[2179,2794,1]';
P5=[3830,1575,1]';
P6=[775,1445,1]';
P7=[3404,3065,1]';
P8=[1257,563,1]';
P9=[1596,3074,1]';
P10=[3694,719,1]';

p1=[2359,860,1]';
p2=[2128,1263,1]';
p3=[3145,2497,1]';
p4=[2573,2979,1]';
p5=[4453,1582,1]';
p6=[694,1240,1]';
p7=[4442,3148,1]';
p8=[1254,101,1]';
p9=[2543,3467,1]';
p10=[4281,732,1]';

A=[P1(1)*p1(1),P1(1)*p1(2),P1(1),p1(1)*P1(2),P1(2)*p1(2),P1(2),p1(1),p1(2),1;
   P2(1)*p2(1),P2(1)*p2(2),P2(1),p2(1)*P2(2),P2(2)*p2(2),P2(2),p2(1),p2(2),1;
   P3(1)*p3(1),P3(1)*p3(2),P3(1),p3(1)*P3(2),P3(2)*p3(2),P3(2),p3(1),p3(2),1;
   P4(1)*p4(1),P4(1)*p4(2),P4(1),p4(1)*P4(2),P4(2)*p4(2),P4(2),p4(1),p4(2),1;
   P5(1)*p5(1),P5(1)*p5(2),P5(1),p5(1)*P5(2),P5(2)*p5(2),P5(2),p5(1),p5(2),1;
   P6(1)*p6(1),P6(1)*p6(2),P6(1),p6(1)*P6(2),P6(2)*p6(2),P6(2),p6(1),p6(2),1;
   P7(1)*p7(1),P7(1)*p7(2),P7(1),p7(1)*P7(2),P7(2)*p7(2),P7(2),p7(1),p7(2),1;
   P8(1)*p8(1),P8(1)*p8(2),P8(1),p8(1)*P8(2),P8(2)*p8(2),P8(2),p8(1),p8(2),1;
   P9(1)*p9(1),P9(1)*p9(2),P9(1),p9(1)*P9(2),P9(2)*p9(2),P9(2),p9(1),p9(2),1;
   P10(1)*p10(1),P10(1)*p10(2),P10(1),p10(1)*P10(2),P10(2)*p10(2),P10(2),p10(1),p10(2),1;
   ];

[V, D] =eig(A'*A);
F=[V(1,1),V(2,1),V(3,1);
   V(4,1),V(5,1),V(6,1);
   V(7,1),V(8,1),V(9,1)];



imshow(x2);
hold on;
x=-10000:10000;
%left camera epiploe 

l=F'*P1;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);

l=F'*P2;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);

l=F'*P3;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);

l=F'*P4;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);

l=F'*P5;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);

l=F'*P6;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);

l=F'*P7;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);

l=F'*P8;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);

l=F'*P9;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);

l=F'*P10;
n=sqrt(l(1)^2+l(2)^2);
l=l/n;
a=l(1);
b=l(2);
y=-(l(3)+a*x)/b;
plot(x,y);


%right camera epiploe 

% imshow(x1);
% hold on;

% x=-5000:4864;
% 
% l=F*p1;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);
% 
% l=F*p2;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);
% 
% l=F*p3;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);
% 
% l=F*p4;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);
% 
% l=F*p5;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);
% 
% l=F*p6;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);
% 
% l=F*p7;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);
% 
% l=F*p8;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);
% 
% l=F*p9;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);
% 
% l=F*p10;
% n=sqrt(l(1)^2+l(2)^2);
% l=l/n;
% a=l(1);
% b=l(2);
% y=-(l(3)+a*x)/b;
% plot(x,y);

[v,~]=eig(F*F');
epiploe=[v(1,1),v(2,1),v(3,1)]/v(3,1);
disp ('right epipole')
disp(epiploe);

[v,d]=eig(F'*F);
epiploe=[v(1,1),v(2,1),v(3,1)]/v(3,1);
disp ('left epipole')
disp(epiploe);